<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>test</title>
</head>
<style type="text/css">
  * {
    box-sizing: border-box;
  }

  html, body {
    margin: 0;
    padding: 0;
  }

  body {
    font-family: sans-serif;
    line-height: 1.35;
  }

  main {
    margin: 0 auto;
    max-width: 900px;
    padding: 0 10px;
  }

  figure {
    margin: 20px 0;
  }

  a, a:visited {
    color: crimson;
  }

  label {
    display: block;
    margin: 5px 0 10px;
  }

  legend {
    font-weight: bold;
  }
</style>
<body>
  <main>
    <figure>
      <pre>
        <code>
=====================================================
             _   _                           _     _
  __ _ _ __ | |_| |__  _ __ ___  _ __   ___ (_) __| |
 / _` | '_ \| __| '_ \| '__/ _ \| '_ \ / _ \| |/ _` |
| (_| | | | | |_| | | | | | (_) | |_) | (_) | | (_| |
 \__,_|_| |_|\__|_| |_|_|  \___/| .__/ \___/|_|\__,_|
                                |_|
=====================================================
        </code>
      </pre>
    </figure>
    <h1>Local Gateway</h1>
    <h2>Controls</h2>
    <form>
      <fieldset>
        <legend>Audio</legend>
        <label for="volume">Sound volume</label>
        <input id="volume" type="range" name="volume" value="100" min="0" max="100">
      </fieldset>
    </form>
  </main>
</body>
<script type="text/javascript">
  const COMMAND_ENDPOINT = `${location.protocol}//${location.host}/control`;

  const changeVolume = slider => e => {
    const headers = new Headers({ 'Content-Type': 'application/json' });

    const body = { command: 'volume', data: { value: parseInt(slider.value) }};

    fetch(COMMAND_ENDPOINT, { method: 'POST', headers, body: JSON.stringify(body) })
      .catch(err => { throw err; });
  }

  const volumeSlider = document.getElementById('volume');
  volumeSlider.addEventListener('change', changeVolume(volumeSlider));
</script>
</html>

